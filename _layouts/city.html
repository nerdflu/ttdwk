---
layout: default
---
{% assign prep = page.preposition | default: "in" %}
{% assign all = site.activities | where: "city", page.slug %}
{% assign cityname = page.city_title | default: page.title %}

{% if page.photo %}
<figure class="city-hero"><img src="{{ page.photo | relative_url }}" alt="{{ cityname }}"></figure>
{% endif %}

<p class="lede">{{ page.lede | default: "Family activities " | append: prep | append: " " | append: cityname | append: "." }}</p>

{% assign present = all | map: "categories" | join: "," | split: "," | uniq %}
{% assign ordered = site.data.categories %}

<nav class="cats" aria-label="Categories">
  <ul class="pill-list">
    {% for c in ordered %}
      {% if present contains c %}
        <li><a href="#cat-{{ c | slugify }}">{{ c | replace: "-", " " | capitalize }}</a></li>
      {% endif %}
    {% endfor %}
  </ul>
  </nav>

<h2 id="all">All activities {{ prep }} {{ page.city_title | default: page.title }}</h2>
<ol>
  {% for a in all %}
    <li><a href="{{ a.url | relative_url }}">{{ a.title }}</a> <small>Â· {{ a.categories | join: ", " }}</small></li>
  {% endfor %}
</ol>

{% for c in ordered %}
  {% if present contains c %}
    <section id="cat-{{ c | slugify }}">
      <h2>{{ c | replace: "-", " " | capitalize }} things to do {{ prep }} {{ page.city_title | default: page.title }}</h2>
      <ul>
        {% assign subset = all | where_exp: "x", "x.categories contains c" %}
        {% for a in subset %}
          <li><a href="{{ a.url | relative_url }}">{{ a.title }}</a></li>
        {% endfor %}
      </ul>
    </section>
  {% endif %}
{% endfor %}


